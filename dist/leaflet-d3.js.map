{"version":3,"file":"leaflet-d3.js","sources":["../src/js/hexbin/HexbinLayer.js","../src/js/ping/PingLayer.js","../src/js/svg/D3SvgLayer.js"],"sourcesContent":["import * as d3 from 'd3';\r\nimport * as d3Hexbin from 'd3-hexbin';\r\nimport 'leaflet';\r\n\r\n/**\r\n * This is a convoluted way of getting ahold of the hexbin function.\r\n * - When imported globally, d3 is exposed in the global namespace as 'd3'\r\n * - When imported using a module system, it's a named import (and can't collide with d3)\r\n * - When someone isn't importing d3-hexbin, the named import will be undefined\r\n *\r\n * As a result, we have to figure out how it's being imported and get the function reference\r\n * (which is why we have this convoluted nested ternary statement\r\n */\r\nvar d3_hexbin = (null != d3.hexbin)? d3.hexbin : (null != d3Hexbin)? d3Hexbin.hexbin : null;\r\n\r\n/**\r\n * L is defined by the Leaflet library, see git://github.com/Leaflet/Leaflet.git for documentation\r\n * We extent L.Layer if it exists, L.Class otherwise. This is for backwards-compatibility with\r\n * Leaflet < 1.x\r\n */\r\nL.HexbinLayer = (L.Layer ? L.Layer : L.Class).extend({\r\n\tincludes: [ L.Mixin.Events ],\r\n\r\n\t/**\r\n\t * Default options\r\n\t */\r\n\toptions : {\r\n\t\tradius : 12,\r\n\t\topacity: 0.6,\r\n\t\tduration: 200,\r\n\r\n\t\tcolorScaleExtent: [ 1, undefined ],\r\n\t\tradiusScaleExtent: [ 1, undefined ],\r\n\t\tcolorRange: [ '#f7fbff', '#08306b' ],\r\n\t\tradiusRange: [ 4, 12 ],\r\n\r\n\t\tpointerEvents: 'all'\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Standard Leaflet initialize function, accepting an options argument provided by the\r\n\t * user when they create the layer\r\n\t * @param options Options object where the options override the defaults\r\n\t */\r\n\tinitialize : function(options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\t// Set up the various overrideable functions\r\n\t\tthis._fn = {\r\n\t\t\tlng: function(d) { return d[0]; },\r\n\t\t\tlat: function(d) { return d[1]; },\r\n\t\t\tcolorValue: function(d) { return d.length; },\r\n\t\t\tradiusValue: function(d) { return Number.MAX_VALUE; },\r\n\r\n\t\t\tfill: function(d) {\r\n\t\t\t\tvar val = this._fn.colorValue(d);\r\n\t\t\t\treturn (null != val) ? this._scale.color(val) : 'none';\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Set up the customizable scale\r\n\t\tthis._scale = {\r\n\t\t\tcolor: d3.scaleLinear(),\r\n\t\t\t\tradius: d3.scaleLinear()\r\n\t\t};\r\n\r\n\t\t// Set up the Dispatcher for managing events and callbacks\r\n\t\tthis._dispatch = d3.dispatch('mouseover', 'mouseout', 'click');\r\n\r\n\r\n\t\t\t// Create the hex layout\r\n\t\tthis._hexLayout = d3_hexbin()\r\n\t\t\t.radius(this.options.radius)\r\n\t\t\t.x(function(d) { return d.point[0]; })\r\n\t\t\t.y(function(d) { return d.point[1]; });\r\n\r\n\t\t// Initialize the data array to be empty\r\n\t\tthis._data = [];\r\n\r\n\t\tthis._scale.color\r\n\t\t\t.range(this.options.colorRange)\r\n\t\t\t.clamp(true);\r\n\r\n\t\tthis._scale.radius\r\n\t\t\t.range(this.options.radiusRange)\r\n\t\t\t.clamp(true);\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Callback made by Leaflet when the layer is added to the map\r\n\t * @param map Reference to the map to which this layer has been added\r\n\t */\r\n\tonAdd : function(map) {\r\n\r\n\t\t// Store a reference to the map for later use\r\n\t\tthis._map = map;\r\n\r\n\t\t// Create a container for svg\r\n\t\tthis._initContainer();\r\n\r\n\t\t// Redraw on moveend\r\n\t\tmap.on({ 'moveend': this.redraw }, this);\r\n\r\n\t\t// Initial draw\r\n\t\tthis.redraw();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Callback made by Leaflet when the layer is removed from the map\r\n\t * @param map Reference to the map from which this layer is being removed\r\n\t */\r\n\tonRemove : function(map) {\r\n\r\n\t\t// Destroy the svg container\r\n\t\tthis._destroyContainer();\r\n\r\n\t\t// Remove events\r\n\t\tmap.off({ 'moveend': this.redraw }, this);\r\n\r\n\t\tthis._container = null;\r\n\t\tthis._map = null;\r\n\r\n\t\t// Explicitly will leave the data array alone in case the layer will be shown again\r\n\t\t//this._data = [];\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Create the SVG container for the hexbins\r\n\t * @private\r\n\t */\r\n\t_initContainer : function() {\r\n\r\n\t\t// If the container is null or the overlay pane is empty, create the svg element for drawing\r\n\t\tif (null == this._container) {\r\n\r\n\t\t\t// The svg is in the overlay pane so it's drawn on top of other base layers\r\n\t\t\tvar overlayPane = this._map.getPanes().overlayPane;\r\n\r\n\t\t\t// The leaflet-zoom-hide class hides the svg layer when zooming\r\n\t\t\tthis._container = d3.select(overlayPane).append('svg')\r\n\t\t\t\t.attr('class', 'leaflet-layer leaflet-zoom-hide');\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Clean up the svg container\r\n\t * @private\r\n\t */\r\n\t_destroyContainer: function() {\r\n\r\n\t\t// Remove the svg element\r\n\t\tif (null != this._container) {\r\n\t\t\tthis._container.remove();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * (Re)draws the hexbins data on the container\r\n\t * @private\r\n\t */\r\n\tredraw : function() {\r\n\t\tvar that = this;\r\n\r\n\t\tif (!that._map) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Generate the mapped version of the data\r\n\t\tvar data = that._data.map(function(d) {\r\n\t\t\tvar lng = that._fn.lng(d);\r\n\t\t\tvar lat = that._fn.lat(d);\r\n\r\n\t\t\tvar point = that._project([ lng, lat ]);\r\n\t\t\treturn { o: d, point: point };\r\n\t\t});\r\n\r\n\t\t// Determine the bounds from the data and scale the overlay\r\n\t\tvar margin = 512; // We're adding a large margin to avoid clipping during transitions\r\n\t\tvar bounds = this._getBounds(data);\r\n\t\tvar width = (bounds.max[0] - bounds.min[0]) + (2 * margin),\r\n\t\t\theight = (bounds.max[1] - bounds.min[1]) + (2 * margin),\r\n\t\t\tmarginTop = bounds.min[1] - margin,\r\n\t\t\tmarginLeft = bounds.min[0] - margin;\r\n\r\n\r\n\t\tthis._container\r\n\t\t\t.attr('width', width).attr('height', height)\r\n\t\t\t.style('margin-left', marginLeft + 'px')\r\n\t\t\t.style('margin-top', marginTop + 'px');\r\n\r\n\t\t// Select the hex group for the current zoom level. This has\r\n\t\t// the effect of recreating the group if the zoom level has changed\r\n\t\tvar join = this._container.selectAll('g.hexbin')\r\n\t\t\t.data([ this._map.getZoom() ], function(d) { return d; });\r\n\r\n\t\t// enter\r\n\t\tvar enter = join.enter().append('g')\r\n\t\t\t.attr('class', function(d) { return 'hexbin zoom-' + d; });\r\n\r\n\t\t// enter + update\r\n\t\tvar enterUpdate = enter.merge(join);\r\n\t\tenterUpdate.attr('transform', 'translate(' + -marginLeft + ',' + -marginTop + ')');\r\n\r\n\t\t// exit\r\n\t\tjoin.exit().remove();\r\n\r\n\t\t// add the hexagons to the select\r\n\t\tthis._createHexagons(enterUpdate, data);\r\n\r\n\t},\r\n\r\n\t_createHexagons : function(g, data) {\r\n\t\tvar that = this;\r\n\r\n\t\t// Create the bins using the hexbin layout\r\n\t\tvar bins = that._hexLayout(data);\r\n\r\n\t\t// Derive the extents of the data values for each dimension\r\n\t\tvar colorExtent = that._getExtent(bins, that._fn.colorValue, that.options.colorScaleExtent);\r\n\t\tvar radiusExtent = that._getExtent(bins, that._fn.radiusValue, that.options.radiusScaleExtent);\r\n\r\n\t\t// Match the domain cardinality to that of the color range, to allow for a polylinear scale\r\n\t\tvar colorDomain = that._linearlySpace(colorExtent[0], colorExtent[1], that._scale.color.range().length);\r\n\r\n\t\t// Set the scale domains\r\n\t\tthat._scale.color.domain(colorDomain);\r\n\t\tthat._scale.radius.domain(radiusExtent);\r\n\r\n\r\n\t\t/*\r\n\t\t * Join\r\n\t\t *    Join the Hexagons to the data\r\n\t\t *    Use a deterministic id for tracking bins based on position\r\n\t\t */\r\n\t\tvar join = g.selectAll('path.hexbin-hexagon')\r\n\t\t\t.data(bins, function(d) { return d.x + ':' + d.y; });\r\n\r\n\r\n\t\t/*\r\n\t\t * Update\r\n\t\t *    Set the fill and opacity on a transition\r\n\t\t *    opacity is re-applied in case the enter transition was cancelled\r\n\t\t *    the path is applied as well to resize the bins\r\n\t\t */\r\n\t\tjoin.transition().duration(that.options.duration)\r\n\t\t\t.attr('fill', that._fn.fill.bind(that))\r\n\t\t\t.attr('fill-opacity', that.options.opacity)\r\n\t\t\t.attr('stroke-opacity', that.options.opacity)\r\n\t\t\t.attr('d', function(d) {\r\n\t\t\t\treturn that._hexLayout.hexagon(that._scale.radius(that._fn.radiusValue.call(that, d)));\r\n\t\t\t});\r\n\r\n\r\n\t\t/*\r\n\t\t * Enter\r\n\t\t *    Establish the path, size, fill, and the initial opacity\r\n\t\t *    Transition to the final opacity and size\r\n\t\t */\r\n\t\tjoin.enter().append('path').attr('class', 'hexbin-hexagon')\r\n\t\t\t.style('pointer-events', that.options.pointerEvents)\r\n\t\t\t.attr('transform', function(d) {\r\n\t\t\t\treturn 'translate(' + d.x + ',' + d.y + ')';\r\n\t\t\t})\r\n\t\t\t.attr('d', function(d) {\r\n\t\t\t\treturn that._hexLayout.hexagon(0);\r\n\t\t\t})\r\n\t\t\t.attr('fill', that._fn.fill.bind(that))\r\n\t\t\t.attr('fill-opacity', 0.01)\r\n\t\t\t.attr('stroke-opacity', 0.01)\r\n\t\t\t.on('mouseover', function(d, i) { that._dispatch.call('mouseover', this, d, i); })\r\n\t\t\t.on('mouseout', function(d, i) { that._dispatch.call('mouseout', this, d, i); })\r\n\t\t\t.on('click', function(d, i) { that._dispatch.call('click', this, d, i); })\r\n\t\t\t.transition().duration(that.options.duration)\r\n\t\t\t\t.attr('fill-opacity', that.options.opacity)\r\n\t\t\t\t.attr('stroke-opacity', that.options.opacity)\r\n\t\t\t\t.attr('d', function(d) {\r\n\t\t\t\t\treturn that._hexLayout.hexagon(that._scale.radius(that._fn.radiusValue.call(that, d)));\r\n\t\t\t\t});\r\n\r\n\r\n\t\t// Exit\r\n\t\tjoin.exit()\r\n\t\t\t.transition().duration(that.options.duration)\r\n\t\t\t\t.attr('fill-opacity', 0.01)\r\n\t\t\t\t.attr('stroke-opacity', 0.01)\r\n\t\t\t\t.attr('d', function(d) {\r\n\t\t\t\t\treturn that._hexLayout.hexagon(0);\r\n\t\t\t\t})\r\n\t\t\t\t.remove();\r\n\r\n\t},\r\n\r\n\t_getExtent: function(bins, valueFn, scaleExtent) {\r\n\r\n\t\t// Determine the extent of the values\r\n\t\tvar extent = d3.extent(bins, valueFn.bind(this));\r\n\r\n\t\t// If either's null, initialize them to 0\r\n\t\tif (null == extent[0]) extent[0] = 0;\r\n\t\tif (null == extent[1]) extent[1] = 0;\r\n\r\n\t\t// Now apply the optional clipping of the extent\r\n\t\tif (null != scaleExtent[0]) extent[0] = scaleExtent[0];\r\n\t\tif (null != scaleExtent[1]) extent[1] = scaleExtent[1];\r\n\r\n\t\treturn extent;\r\n\r\n\t},\r\n\r\n\t_project : function(coord) {\r\n\t\tvar point = this._map.latLngToLayerPoint([ coord[1], coord[0] ]);\r\n\t\treturn [ point.x, point.y ];\r\n\t},\r\n\r\n\t_getBounds: function(data) {\r\n\t\tif(null == data || data.length < 1) {\r\n\t\t\treturn { min: [ 0, 0 ], max: [ 0, 0 ]};\r\n\t\t}\r\n\r\n\t\t// bounds is [[min long, min lat], [max long, max lat]]\r\n\t\tvar bounds = [ [ 999, 999 ], [ -999, -999 ] ];\r\n\r\n\t\tdata.forEach(function(element) {\r\n\t\t\tvar x = element.point[0];\r\n\t\t\tvar y = element.point[1];\r\n\r\n\t\t\tbounds[0][0] = Math.min(bounds[0][0], x);\r\n\t\t\tbounds[0][1] = Math.min(bounds[0][1], y);\r\n\t\t\tbounds[1][0] = Math.max(bounds[1][0], x);\r\n\t\t\tbounds[1][1] = Math.max(bounds[1][1], y);\r\n\t\t});\r\n\r\n\t\treturn { min: bounds[0], max: bounds[1] };\r\n\t},\r\n\r\n\t_linearlySpace: function(from, to, length) {\r\n\t\tvar arr = new Array(length);\r\n\t\tvar step = (to - from) / Math.max(length - 1, 1);\r\n\r\n\t\tfor (var i = 0; i < length; ++i) {\r\n\t\t\tarr[i] = from + (i * step);\r\n\t\t}\r\n\r\n\t\treturn arr;\r\n\t},\r\n\r\n\r\n\t// ------------------------------------\r\n\t// Public API\r\n\t// ------------------------------------\r\n\r\n\tradius: function(v) {\r\n\t\tif (!arguments.length) { return this.options.radius; }\r\n\r\n\t\tthis.options.radius = v;\r\n\t\tthis._hexLayout.radius(v);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\topacity: function(v) {\r\n\t\tif (!arguments.length) { return this.options.opacity; }\r\n\t\tthis.options.opacity = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tduration: function(v) {\r\n\t\tif (!arguments.length) { return this.options.duration; }\r\n\t\tthis.options.duration = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcolorScaleExtent: function(v) {\r\n\t\tif (!arguments.length) { return this.options.colorScaleExtent; }\r\n\t\tthis.options.colorScaleExtent = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusScaleExtent: function(v) {\r\n\t\tif (!arguments.length) { return this.options.radiusScaleExtent; }\r\n\t\tthis.options.radiusScaleExtent = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcolorRange: function(v) {\r\n\t\tif (!arguments.length) { return this.options.colorRange; }\r\n\t\tthis.options.colorRange = v;\r\n\t\tthis._scale.color.range(v);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusRange: function(v) {\r\n\t\tif (!arguments.length) { return this.options.radiusRange; }\r\n\t\tthis.options.radiusRange = v;\r\n\t\tthis._scale.radius.range(v);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcolorScale: function(v) {\r\n\t\tif (!arguments.length) { return this._scale.color; }\r\n\t\tthis._scale.color = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusScale: function(v) {\r\n\t\tif (!arguments.length) { return this._scale.radius; }\r\n\t\tthis._scale.radius = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tlng: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.lng; }\r\n\t\tthis._fn.lng = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tlat: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.lat; }\r\n\t\tthis._fn.lat = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tcolorValue: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.colorValue; }\r\n\t\tthis._fn.colorValue = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusValue: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.radiusValue; }\r\n\t\tthis._fn.radiusValue = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfill: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.fill; }\r\n\t\tthis._fn.fill = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdata: function(v) {\r\n\t\tif (!arguments.length) { return this._data; }\r\n\t\tthis._data = (null != v) ? v : [];\r\n\r\n\t\tthis.redraw();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/*\r\n\t * Getter for the event dispatcher\r\n\t */\r\n\tdispatch: function() {\r\n\t\treturn this._dispatch;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t * Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.\r\n\t */\r\n\tgetLatLngs: function () {\r\n\t\tvar that = this;\r\n\r\n\t\t// Map the data into an array of latLngs using the configured lat/lng accessors\r\n\t\treturn this._data.map(function(d) {\r\n\t\t\treturn L.latLng(that.options.lat(d), that.options.lng(d));\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\t * Get path geometry as GeoJSON\r\n\t */\r\n\ttoGeoJSON: function () {\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'LineString',\r\n\t\t\tcoordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs(), 0)\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\r\nL.hexbinLayer = function(options) {\r\n\treturn new L.HexbinLayer(options);\r\n};\r\n","import * as d3 from 'd3';\r\nimport 'leaflet';\r\n\r\n/**\r\n * L is defined by the Leaflet library, see git://github.com/Leaflet/Leaflet.git for documentation\r\n * We extent L.Layer if it exists, L.Class otherwise. This is for backwards-compatibility with\r\n * Leaflet < 1.x\r\n */\r\nL.PingLayer = (L.Layer ? L.Layer : L.Class).extend({\r\n\tincludes: [ L.Mixin.Events ],\r\n\r\n\t/*\r\n\t * Default options\r\n\t */\r\n\toptions : {\r\n\t\tduration: 800,\r\n\t\tfps: 32,\r\n\t\topacityRange: [ 1, 0 ],\r\n\t\tradiusRange: [ 3, 15 ]\r\n\t},\r\n\r\n\r\n\t// Initialization of the plugin\r\n\tinitialize : function(options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._fn = {\r\n\t\t\tlng: function(d) { return d[0]; },\r\n\t\t\tlat: function(d) { return d[1]; },\r\n\t\t\tradiusScaleFactor: function(d) { return 1; }\r\n\t\t};\r\n\r\n\t\tthis._scale = {\r\n\t\t\tradius: d3.scalePow().exponent(0.35),\r\n\t\t\t\topacity: d3.scaleLinear()\r\n\t\t};\r\n\r\n\t\tthis._lastUpdate = Date.now();\r\n\t\tthis._fps = 0;\r\n\t\tthis._mapBounds = undefined;\r\n\r\n\t\tthis._scale.radius\r\n\t\t\t.domain([ 0, this.options.duration ])\r\n\t\t\t.range(this.options.radiusRange)\r\n\t\t\t.clamp(true);\r\n\t\tthis._scale.opacity\r\n\t\t\t.domain([ 0, this.options.duration ])\r\n\t\t\t.range(this.options.opacityRange)\r\n\t\t\t.clamp(true);\r\n\t},\r\n\r\n\t// Called when the plugin layer is added to the map\r\n\tonAdd : function(map) {\r\n\r\n\t\t// Store a reference to the map for later use\r\n\t\tthis._map = map;\r\n\r\n\t\t// Init the state of the simulation\r\n\t\tthis._running = false;\r\n\r\n\t\t// Create a container for svg\r\n\t\tthis._initContainer();\r\n\t\tthis._updateContainer();\r\n\r\n\t\t// Set up events\r\n\t\tmap.on({'move': this._move}, this);\r\n\r\n\t},\r\n\r\n\t// Called when the plugin layer is removed from the map\r\n\tonRemove : function(map) {\r\n\r\n\t\t// Destroy the svg container\r\n\t\tthis._destroyContainer();\r\n\r\n\t\t// Remove events\r\n\t\tmap.off({'move': this._move}, this);\r\n\r\n\t\tthis._container = null;\r\n\t\tthis._map = null;\r\n\t\tthis._data = null;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t * Private Methods\r\n\t */\r\n\r\n\t// Initialize the Container - creates the svg pane\r\n\t_initContainer : function() {\r\n\r\n\t\t// If the container is null or the overlay pane is empty, create the svg element for drawing\r\n\t\tif (null == this._container) {\r\n\r\n\t\t\t// The svg is in the overlay pane so it's drawn on top of other base layers\r\n\t\t\tvar overlayPane = this._map.getPanes().overlayPane;\r\n\r\n\t\t\t// The leaflet-zoom-hide class hides the svg layer when zooming\r\n\t\t\tthis._container = d3.select(overlayPane).append('svg')\r\n\t\t\t\t.attr('class', 'leaflet-layer leaflet-zoom-hide');\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Update the container - Updates the dimensions of the svg pane\r\n\t_updateContainer : function() {\r\n\r\n\t\tvar bounds = this._getMapBounds();\r\n\t\tthis._mapBounds = bounds;\r\n\r\n\t\tthis._container\r\n\t\t\t.attr('width', bounds.width).attr('height', bounds.height)\r\n\t\t\t.style('margin-left', bounds.left + 'px')\r\n\t\t\t.style('margin-top', bounds.top + 'px');\r\n\r\n\t\tthis._update(true);\r\n\r\n\t},\r\n\r\n\t// Cleanup the svg pane\r\n\t_destroyContainer: function() {\r\n\r\n\t\t// Remove the svg element\r\n\t\tif(null != this._container) {\r\n\t\t\tthis._container.remove();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\r\n\t// Calculate the current map bounds\r\n\t_getMapBounds: function() {\r\n\t\tvar latLongBounds = this._map.getBounds();\r\n\t\tvar ne = this._map.latLngToLayerPoint(latLongBounds.getNorthEast());\r\n\t\tvar sw = this._map.latLngToLayerPoint(latLongBounds.getSouthWest());\r\n\r\n\t\tvar bounds = {\r\n\t\t\twidth: ne.x - sw.x,\r\n\t\t\theight: sw.y - ne.y,\r\n\t\t\tleft: sw.x,\r\n\t\t\ttop: ne.y\r\n\t\t};\r\n\r\n\t\treturn bounds;\r\n\t},\r\n\r\n\t// Calculate the circle coordinates for the provided data\r\n\t_getCircleCoords: function(geo) {\r\n\t\tvar point = this._map.latLngToLayerPoint(geo);\r\n\t\treturn { x: point.x - this._mapBounds.left, y: point.y - this._mapBounds.top };\r\n\t},\r\n\r\n\t// Update the map based on zoom/pan/move\r\n\t_move: function() {\r\n\t\tthis._updateContainer();\r\n\t},\r\n\r\n\t// Add a ping to the map\r\n\t_add : function(data, cssClass) {\r\n\t\t// Lazy init the data array\r\n\t\tif (null == this._data) this._data = [];\r\n\r\n\t\t// Derive the spatial data\r\n\t\tvar geo = [ this._fn.lat(data), this._fn.lng(data) ];\r\n\t\tvar coords = this._getCircleCoords(geo);\r\n\r\n\t\t// Add the data to the list of pings\r\n\t\tvar circle = {\r\n\t\t\tdata: data,\r\n\t\t\tgeo: geo,\r\n\t\t\tts: Date.now(),\r\n\t\t\tnts: 0\r\n\t\t};\r\n\t\tcircle.c = this._container.append('circle')\r\n\t\t\t.attr('class', (null != cssClass)? 'ping ' + cssClass : 'ping')\r\n\t\t\t.attr('cx', coords.x)\r\n\t\t\t.attr('cy', coords.y)\r\n\t\t\t.attr('r', this._fn.radiusScaleFactor.call(this, data) * this._scale.radius.range()[0]);\r\n\r\n\t\t// Push new circles\r\n\t\tthis._data.push(circle);\r\n\t},\r\n\r\n\t// Main update loop\r\n\t_update : function(immediate) {\r\n\t\tvar nowTs = Date.now();\r\n\t\tif (null == this._data) this._data = [];\r\n\r\n\t\tvar maxIndex = -1;\r\n\r\n\t\t// Update everything\r\n\t\tfor (var i=0; i < this._data.length; i++) {\r\n\r\n\t\t\tvar d = this._data[i];\r\n\t\t\tvar age = nowTs - d.ts;\r\n\r\n\t\t\tif (this.options.duration < age) {\r\n\r\n\t\t\t\t// If the blip is beyond it's life, remove it from the dom and track the lowest index to remove\r\n\t\t\t\td.c.remove();\r\n\t\t\t\tmaxIndex = i;\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t// If the blip is still alive, process it\r\n\t\t\t\tif (immediate || d.nts < nowTs) {\r\n\r\n\t\t\t\t\tvar coords = this._getCircleCoords(d.geo);\r\n\r\n\t\t\t\t\td.c.attr('cx', coords.x)\r\n\t\t\t\t\t   .attr('cy', coords.y)\r\n\t\t\t\t\t   .attr('r', this._fn.radiusScaleFactor.call(this, d.data) * this._scale.radius(age))\r\n\t\t\t\t\t   .attr('fill-opacity', this._scale.opacity(age))\r\n\t\t\t\t\t   .attr('stroke-opacity', this._scale.opacity(age));\r\n\t\t\t\t\td.nts = Math.round(nowTs + 1000/this.options.fps);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Delete all the aged off data at once\r\n\t\tif (maxIndex > -1) {\r\n\t\t\tthis._data.splice(0, maxIndex + 1);\r\n\t\t}\r\n\r\n\t\t// The return function dictates whether the timer loop will continue\r\n\t\tthis._running = (this._data.length > 0);\r\n\r\n\t\tif (this._running) {\r\n\t\t\tthis._fps = 1000/(nowTs - this._lastUpdate);\r\n\t\t\tthis._lastUpdate = nowTs;\r\n\t\t}\r\n\r\n\t\treturn !this._running;\r\n\t},\r\n\r\n\t// Expire old pings\r\n\t_expire : function() {\r\n\t\tvar maxIndex = -1;\r\n\t\tvar nowTs = Date.now();\r\n\r\n\t\t// Search from the front of the array\r\n\t\tfor (var i=0; i < this._data.length; i++) {\r\n\t\t\tvar d = this._data[i];\r\n\t\t\tvar age = nowTs - d.ts;\r\n\r\n\t\t\tif(this.options.duration < age) {\r\n\t\t\t\t// If the blip is beyond it's life, remove it from the dom and track the lowest index to remove\r\n\t\t\t\td.c.remove();\r\n\t\t\t\tmaxIndex = i;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Delete all the aged off data at once\r\n\t\tif (maxIndex > -1) {\r\n\t\t\tthis._data.splice(0, maxIndex + 1);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t * Public Methods\r\n\t */\r\n\r\n\tduration: function(v) {\r\n\t\tif (!arguments.length) { return this.options.duration; }\r\n\t\tthis.options.duration = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfps: function(v) {\r\n\t\tif (!arguments.length) { return this.options.fps; }\r\n\t\tthis.options.fps = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tlng: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.lng; }\r\n\t\tthis._fn.lng = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tlat: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.lat; }\r\n\t\tthis._fn.lat = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusRange: function(v) {\r\n\t\tif (!arguments.length) { return this.options.radiusRange; }\r\n\t\tthis.options.radiusRange = v;\r\n\t\tthis._scale.radius().range(v);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\topacityRange: function(v) {\r\n\t\tif (!arguments.length) { return this.options.opacityRange; }\r\n\t\tthis.options.opacityRange = v;\r\n\t\tthis._scale.opacity().range(v);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusScale: function(v) {\r\n\t\tif (!arguments.length) { return this._scale.radius; }\r\n\t\tthis._scale.radius = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\topacityScale: function(v) {\r\n\t\tif (!arguments.length) { return this._scale.opacity; }\r\n\t\tthis._scale.opacity = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tradiusScaleFactor: function(v) {\r\n\t\tif (!arguments.length) { return this._fn.radiusScaleFactor; }\r\n\t\tthis._fn.radiusScaleFactor = v;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/*\r\n\t * Method by which to \"add\" pings\r\n\t */\r\n\tping : function(data, cssClass) {\r\n\t\tthis._add(data, cssClass);\r\n\t\tthis._expire();\r\n\r\n\t\t// Start timer if not active\r\n\t\tif (!this._running && this._data.length > 0) {\r\n\t\t\tthis._running = true;\r\n\t\t\tthis._lastUpdate = Date.now();\r\n\r\n\t\t\tvar that = this;\r\n\t\t\td3.timer(function() { that._update.call(that, false) });\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetActualFps : function() {\r\n\t\treturn this._fps;\r\n\t},\r\n\r\n\tdata : function() {\r\n\t\treturn this._data;\r\n\t},\r\n\r\n});\r\n\r\nL.pingLayer = function(options) {\r\n\treturn new L.PingLayer(options);\r\n};\r\n","/**\n * Initial work by Teralytics AG (Copyright 2015)\n * @author Kirill Zhuravlev <kirill.zhuravlev@teralytics.ch>\n *\n */\nimport * as d3 from 'd3';\nimport 'leaflet';\n\n/**\n * L is defined by the Leaflet library, see git://github.com/Leaflet/Leaflet.git for documentation\n * We extent L.Layer if it exists, L.Class otherwise. This is for backwards-compatibility with\n * Leaflet < 1.x\n */\n\n// Tiny stylesheet bundled here instead of a separate file\nif (L.version >= \"1.0\") {\n\td3.select(\"head\")\n\t\t.append(\"style\").attr(\"type\", \"text/css\")\n\t\t.text(\"g.d3-overlay *{pointer-events:visiblePainted;}\");\n}\n\n// Class definition\nL.D3SvgLayer = (L.Layer ? L.Layer : L.Class).extend({\n\tincludes: (L.version < \"1.0\" ? L.Mixin.Events : []),\n\n\t_undef: function (a) {\n\t\treturn typeof a === \"undefined\"\n\t},\n\n\t_options: function (options) {\n\t\tif (this._undef(options)) {\n\t\t\treturn this.options;\n\t\t}\n\t\toptions.zoomHide = this._undef(options.zoomHide) ? false : options.zoomHide;\n\t\toptions.zoomDraw = this._undef(options.zoomDraw) ? true : options.zoomDraw;\n\n\t\treturn this.options = options;\n\t},\n\n\t_disableLeafletRounding: function () {\n\t\tthis._leaflet_round = L.Point.prototype._round;\n\t\tL.Point.prototype._round = function () {\n\t\t\treturn this;\n\t\t};\n\t},\n\n\t_enableLeafletRounding: function () {\n\t\tL.Point.prototype._round = this._leaflet_round;\n\t},\n\n\tdraw: function () {\n\t\tthis._disableLeafletRounding();\n\t\tthis._drawCallback(this.selection, this.projection, this.map.getZoom());\n\t\tthis._enableLeafletRounding();\n\t},\n\n\tinitialize: function (drawCallback, options) { // (Function(selection, projection)), (Object)options\n\t\tthis._options(options || {});\n\t\tthis._drawCallback = drawCallback;\n\t},\n\n\t// Handler for \"viewreset\"-like events, updates scale and shift after the animation\n\t_zoomChange: function (evt) {\n\t\tthis._disableLeafletRounding();\n\t\tvar newZoom = this._undef(evt.zoom) ? this.map._zoom : evt.zoom; // \"viewreset\" event in Leaflet has not zoom/center parameters like zoomanim\n\t\tthis._zoomDiff = newZoom - this._zoom;\n\t\tthis._scale = Math.pow(2, this._zoomDiff);\n\t\tthis.projection.scale = this._scale;\n\t\tthis._shift = this.map.latLngToLayerPoint(this._wgsOrigin)\n\t\t\t._subtract(this._wgsInitialShift.multiplyBy(this._scale));\n\n\t\tvar shift = [ \"translate(\", this._shift.x, \",\", this._shift.y, \") \" ];\n\t\tvar scale = [ \"scale(\", this._scale, \",\", this._scale, \") \" ];\n\t\tthis._rootGroup.attr(\"transform\", shift.concat(scale).join(\"\"));\n\n\t\tif (this.options.zoomDraw) {\n\t\t\tthis.draw()\n\t\t}\n\t\tthis._enableLeafletRounding();\n\t},\n\n\tonAdd: function (map) {\n\t\tthis.map = map;\n\t\tvar _layer = this;\n\n\t\t// SVG element\n\t\tif (L.version < \"1.0\") {\n\t\t\tmap._initPathRoot();\n\t\t\tthis._svg = d3.select(map._panes.overlayPane)\n\t\t\t\t.select(\"svg\");\n\t\t\tthis._rootGroup = this._svg.append(\"g\");\n\t\t}\n\t\telse {\n\t\t\tthis._svg = L.svg();\n\t\t\tmap.addLayer(this._svg);\n\t\t\tthis._rootGroup = d3.select(this._svg._rootGroup).classed(\"d3-overlay\", true);\n\t\t}\n\t\tthis._rootGroup.classed(\"leaflet-zoom-hide\", this.options.zoomHide);\n\t\tthis.selection = this._rootGroup;\n\n\t\t// Init shift/scale invariance helper values\n\t\tthis.initHelperValues();\n\n\t\t// Create projection object\n\t\tthis.projection = {\n\t\t\tlatLngToLayerPoint: function (latLng, zoom) {\n\t\t\t\tzoom = _layer._undef(zoom) ? _layer._zoom : zoom;\n\t\t\t\tvar projectedPoint = _layer.map.project(L.latLng(latLng), zoom)._round();\n\t\t\t\treturn projectedPoint._subtract(_layer._pixelOrigin);\n\t\t\t},\n\t\t\tlayerPointToLatLng: function (point, zoom) {\n\t\t\t\tzoom = _layer._undef(zoom) ? _layer._zoom : zoom;\n\t\t\t\tvar projectedPoint = L.point(point).add(_layer._pixelOrigin);\n\t\t\t\treturn _layer.map.unproject(projectedPoint, zoom);\n\t\t\t},\n\t\t\tunitsPerMeter: 256 * Math.pow(2, _layer._zoom) / 40075017,\n\t\t\tmap: _layer.map,\n\t\t\tlayer: _layer,\n\t\t\tscale: 1\n\t\t};\n\t\tthis.projection._projectPoint = function (x, y) {\n\t\t\tvar point = _layer.projection.latLngToLayerPoint(new L.LatLng(y, x));\n\t\t\tthis.stream.point(point.x, point.y);\n\t\t};\n\t\tif (d3.geo) {\n\t\t\t//d3 v3\n\t\t\tthis.projection.pathFromGeojson = d3.geo.path().projection(d3.geo.transform({point: this.projection._projectPoint}));\n\t\t}\n\t\telse {\n\t\t\t//d3 v4\n\t\t\tthis.projection.pathFromGeojson = d3.geoPath().projection(d3.geoTransform({point: this.projection._projectPoint}));\n\n\t\t}\n\t\t// Compatibility with v.1\n\t\tthis.projection.latLngToLayerFloatPoint = this.projection.latLngToLayerPoint;\n\t\tthis.projection.getZoom = this.map.getZoom.bind(this.map);\n\t\tthis.projection.getBounds = this.map.getBounds.bind(this.map);\n\t\tthis.selection = this._rootGroup;\n\n\t\tif (L.version < \"1.0\") map.on(\"viewreset\", this._zoomChange, this);\n\t\t// Initial draw\n\t\tthis.draw();\n\t},\n\n\t// Leaflet 1.0\n\tgetEvents: function () {\n\t\treturn {zoomend: this._zoomChange};\n\t},\n\n\tonRemove: function (map) {\n\t\tif (L.version < \"1.0\") {\n\t\t\tmap.off(\"viewreset\", this._zoomChange, this);\n\t\t\tthis._rootGroup.remove();\n\t\t}\n\t\telse {\n\t\t\tthis._svg.remove();\n\t\t}\n\t},\n\n\taddTo: function (map) {\n\t\tmap.addLayer(this);\n\t\treturn this;\n\t},\n\tinitHelperValues: function () {\n\t\t// Init shift/scale invariance helper values\n\t\tthis._pixelOrigin = this.map.getPixelOrigin();\n\t\tthis._wgsOrigin = L.latLng([ 0, 0 ]);\n\t\tthis._wgsInitialShift = this.map.latLngToLayerPoint(this._wgsOrigin);\n\t\tthis._zoom = this.map.getZoom();\n\t\tthis._shift = L.point(0, 0);\n\t\tthis._scale = 1;\n\t}\n\n});\n\nL.D3SvgLayer.version = \"3.0\";\n\n// Factory method\nL.d3SvgLayer = function (drawCallback, options) {\n\treturn new L.D3SvgLayer(drawCallback, options);\n};\n\n"],"names":["d3.hexbin","d3Hexbin.hexbin","d3.scaleLinear","d3.dispatch","d3.select","extent","d3.extent","d3.scalePow","geo","d3.timer","d3.geo","d3.geoPath","d3.geoTransform"],"mappings":"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"}